/*! Transtool - v1.0.0 - 2014-08-15
* https://github.com/i5ting/toolbar
* Copyright (c) 2014 ; Licensed MIT */
"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),function(a,b){var c={init:function(b,c){var d=this;d.elem=c,d.$elem=a(c),d.options=a.extend({},a.fn.toolbar.options,b),d.toolbar=a('<div class="tool-container gradient" />').addClass("tool-"+d.options.position).addClass("tool-rounded").append('<div class="tool-items" />').append('<div class="arrow" />').appendTo("body").css("opacity",0).hide(),d.toolbar_arrow=d.toolbar.find(".arrow"),d.initializeToolbar()},initializeToolbar:function(){var a=this;a.populateContent(),a.setTrigger(),a.toolbarWidth=a.toolbar.width()},setTrigger:function(){var c=this;c.$elem.on("click",function(a){a.preventDefault(),c.$elem.hasClass("pressed")?c.hide():c.show()}),c.options.hideOnClick&&a("html").on("click.toolbar",function(a){a.target!=c.elem&&0===c.$elem.has(a.target).length&&0===c.toolbar.has(a.target).length&&c.toolbar.is(":visible")&&c.hide()}),a(b).resize(function(a){a.stopPropagation(),c.toolbar.is(":visible")&&(c.toolbarCss=c.getCoordinates(c.options.position,20),c.collisionDetection(),c.toolbar.css(c.toolbarCss),c.toolbar_arrow.css(c.arrowCss))})},populateContent:function(){var b=this,c=b.toolbar.find(".tool-items"),d=a(b.options.content).clone(!0).find("a").addClass("tool-item gradient");c.html(d),c.find(".tool-item").on("click",function(a){a.preventDefault(),b.$elem.trigger("toolbarItemClick",this)})},calculatePosition:function(){var a=this;a.arrowCss={},a.toolbarCss=a.getCoordinates(a.options.position,0),a.toolbarCss.position="absolute",a.toolbarCss.zIndex=a.options.zIndex,a.collisionDetection(),a.toolbar.css(a.toolbarCss),a.toolbar_arrow.css(a.arrowCss)},getCoordinates:function(a,b){var c=this;switch(c.coordinates=c.$elem.offset(),c.options.adjustment&&c.options.adjustment[c.options.position]&&(b=c.options.adjustment[c.options.position]+b),c.options.position){case"top":return{left:c.coordinates.left-c.toolbar.width()/2+c.$elem.outerWidth()/2,top:c.coordinates.top-c.$elem.height()-b,right:"auto"};case"left":return{left:c.coordinates.left-c.toolbar.width()/2-c.$elem.width()/2-b,top:c.coordinates.top-c.toolbar.height()/2+c.$elem.outerHeight()/2,right:"auto"};case"right":return{left:c.coordinates.left+c.toolbar.width()/2+c.$elem.width()/3+b,top:c.coordinates.top-c.toolbar.height()/2+c.$elem.outerHeight()/2,right:"auto"};case"bottom":return{left:c.coordinates.left-c.toolbar.width()/2+c.$elem.outerWidth()/2,top:c.coordinates.top+c.$elem.height()+b,right:"auto"}}},collisionDetection:function(){var c=this,d=20;("top"==c.options.position||"bottom"==c.options.position)&&(c.arrowCss={left:"50%",right:"50%"},c.toolbarCss.left<d?(c.toolbarCss.left=d,c.arrowCss.left=c.$elem.offset().left+c.$elem.width()/2-d):a(b).width()-(c.toolbarCss.left+c.toolbarWidth)<d&&(c.toolbarCss.right=d,c.toolbarCss.left="auto",c.arrowCss.left="auto",c.arrowCss.right=a(b).width()-c.$elem.offset().left-c.$elem.width()/2-d-5))},show:function(){var a=this,b={opacity:1};switch(a.$elem.addClass("pressed"),a.calculatePosition(),a.options.position){case"top":b.top="-=20";break;case"left":b.left="-=20";break;case"right":b.left="+=20";break;case"bottom":b.top="+=20"}a.toolbar.show().animate(b,200),a.$elem.trigger("toolbarShown")},hide:function(){var a=this,b={opacity:0};switch(a.$elem.removeClass("pressed"),a.options.position){case"top":b.top="+=20";break;case"left":b.left="+=20";break;case"right":b.left="-=20";break;case"bottom":b.top="-=20"}a.toolbar.animate(b,200,function(){a.toolbar.hide()}),a.$elem.trigger("toolbarHidden")},getToolbarElement:function(){return this.toolbar.find(".tool-items")}};a.fn.toolbar=function(b){if(a.isPlainObject(b))return this.each(function(){var d=Object.create(c);d.init(b,this),a(this).data("toolbarObj",d)});if("string"==typeof b&&0!==b.indexOf("_")){var d=a(this).data("toolbarObj"),e=d[b];return e.apply(d,a.makeArray(arguments).slice(1))}},a.fn.toolbar.options={content:"#myContent",position:"top",hideOnClick:!1,zIndex:120}}(jQuery,window,document),function(a){function b(b){var c="<div id='user-options' class='toolbar-icons' style='display: none;'>";a.each(b.states,function(){a.each(this,function(b,d){c+="<a id='"+b+"' href='#'><i class='"+d.icon+"'></i></a>",a("#"+b).on("click",d.click)})}),c+="</div>",a("body").append(c),e(c)}function c(b){a.each(b.states,function(){a.each(this,function(b,c){a("#"+b).on("click",c.click)})})}function d(b){a(b.toolbarselector).toolbar(b)}function e(b){a.transtool.options.debug===!0&&console.log(b)}a.transtool=function(e){var f=a.extend({},a.fn.toolbar.options,a.transtool.options,e);b(f),c(f),d(f)},a.transtool.options={debug:!1,toolbarselector:"#user-toolbar",punctuation:".",states:[{zh:{icon:"icon-edit",click:function(){alert("zh")}},en:{icon:"icon-user",click:function(){alert("en")}}}]},a.expr[":"].transtool=function(b){return-1!==a(b).text().indexOf("awesome")}}(jQuery);